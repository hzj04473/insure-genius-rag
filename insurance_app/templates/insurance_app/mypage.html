{% extends "insurance_app/layouts/base.html" %}
{% load static %}

{% block title %}ë§ˆì´í˜ì´ì§€ - ê°œì¸ì •ë³´ ê´€ë¦¬{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
  <!-- í˜ì´ì§€ í—¤ë” -->
  <div class="card" style="margin-bottom: var(--spacing-6);">
    <div class="card-body" style="text-align: center;">
      <div style="width: 60px; height: 60px; background: var(--primary-100); border-radius: var(--radius-2xl); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--spacing-4);">
        <span style="font-size: 24px;">ğŸ‘¤</span>
      </div>
      <h1 style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-bold); color: var(--text-primary); margin-bottom: var(--spacing-2);">
        ë§ˆì´í˜ì´ì§€
      </h1>
      <p style="color: var(--text-secondary); margin: 0;">
        ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”
      </p>
    </div>
  </div>

  <!-- ê°œì¸ ì •ë³´ ìˆ˜ì • í¼ -->
  <div class="card">
    <div class="card-header">
      <h3 style="margin: 0; font-weight: var(--font-weight-bold);">ê°œì¸ ì •ë³´ ìˆ˜ì •</h3>
    </div>
    <div class="card-body">
      <form method="post" autocomplete="off">
        {% csrf_token %}
        
        <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
        <div style="margin-bottom: var(--spacing-6);">
          <h4 style="margin-bottom: var(--spacing-4); color: var(--text-primary); font-weight: var(--font-weight-medium);">ê¸°ë³¸ ì •ë³´</h4>
          
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-4);">
            <!-- ì•„ì´ë”” (ì½ê¸° ì „ìš©) -->
            <div class="form-group">
              <label class="readonly-label">ì•„ì´ë””</label>
              <div class="readonly-field">
                {{ user.username }}
              </div>
              <small class="helptext">ì•„ì´ë””ëŠ” ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</small>
            </div>
            
            <!-- ì´ë©”ì¼ -->
            <div class="form-group">
              <label class="form-label" for="email">ì´ë©”ì¼ ì£¼ì†Œ</label>
              <input type="email" id="email" name="email" class="form-input" 
                     value="{{ user.email }}" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            
            <!-- ìƒë…„ì›”ì¼ -->
            <div class="form-group">
              <label class="form-label" for="birth_date">ìƒë…„ì›”ì¼</label>
              <input type="date" id="birth_date" name="birth_date" class="form-input" 
                     value="{% if user.birth_date %}{{ user.birth_date|date:'Y-m-d' }}{% endif %}">
            </div>
            
            <!-- ì„±ë³„ -->
            <div class="form-group">
              <label class="form-label" for="gender">ì„±ë³„</label>
              <select id="gender" name="gender" class="form-select">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="M" {% if user.gender == 'M' %}selected{% endif %}>ë‚¨ì„±</option>
                <option value="F" {% if user.gender == 'F' %}selected{% endif %}>ì—¬ì„±</option>
                <option value="O" {% if user.gender == 'O' %}selected{% endif %}>ê¸°íƒ€</option>
              </select>
            </div>
            
            <!-- ìš´ì „ë©´í—ˆ -->
            <div class="form-group">
              <label class="form-label" for="has_license">ìš´ì „ë©´í—ˆ</label>
              <select id="has_license" name="has_license" class="form-select">
                <option value="false" {% if not user.has_license %}selected{% endif %}>ì—†ìŒ</option>
                <option value="true" {% if user.has_license %}selected{% endif %}>ìˆìŒ</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„¹ì…˜ -->
        <div style="margin-bottom: var(--spacing-6);">
          <h4 style="margin-bottom: var(--spacing-4); color: var(--text-primary); font-weight: var(--font-weight-medium);">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (ì„ íƒì‚¬í•­)</h4>
          
          <div class="form-group">
            <label class="form-label" for="{{ form.current_password.id_for_label }}">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
            {{ form.current_password }}
            {% if form.current_password.errors %}
              <div style="color: var(--accent-color); font-size: var(--font-size-sm); margin-top: var(--spacing-1);">
                {{ form.current_password.errors.0 }}
              </div>
            {% endif %}
          </div>

          <div class="form-group">
            <label class="form-label" for="{{ form.new_password1.id_for_label }}">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
            {{ form.new_password1 }}
            {% if form.new_password1.help_text %}
              <div style="color: var(--text-muted); font-size: var(--font-size-sm); margin-top: var(--spacing-1);">
                {{ form.new_password1.help_text|safe }}
              </div>
            {% endif %}
            {% if form.new_password1.errors %}
              <div style="color: var(--accent-color); font-size: var(--font-size-sm); margin-top: var(--spacing-1);">
                {{ form.new_password1.errors.0 }}
              </div>
            {% endif %}
          </div>

          <div class="form-group">
            <label class="form-label" for="{{ form.new_password2.id_for_label }}">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
            {{ form.new_password2 }}
            {% if form.new_password2.errors %}
              <div style="color: var(--accent-color); font-size: var(--font-size-sm); margin-top: var(--spacing-1);">
                {{ form.new_password2.errors.0 }}
              </div>
            {% endif %}
          </div>
        </div>

        <div style="display: flex; gap: var(--spacing-3); justify-content: flex-end; margin-top: var(--spacing-6);">
          <a href="/" class="btn btn-outline">ì·¨ì†Œ</a>
          <button type="submit" class="btn btn-primary">ì •ë³´ ìˆ˜ì •</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}