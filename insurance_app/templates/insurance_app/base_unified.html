{% load static %}
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}ë³´í—˜ í”Œë«í¼{% endblock %}</title>

    <!-- í†µí•© ë””ìì¸ ì‹œìŠ¤í…œ CSS -->
    <link rel="stylesheet" href="{% static 'insurance_app/css/common-theme.css' %}" />
    <link rel="stylesheet" href="{% static 'insurance_app/css/components.css' %}" />

    <!-- í˜ì´ì§€ë³„ ì¶”ê°€ CSS -->
    {% block extra_css %}{% endblock %}

    <style>
      /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ */
      body {
        font-family: var(--font-family);
        margin: 0;
        padding: 0;
        background: var(--primary-gradient);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .main-container {
        background: var(--bg-card);
        padding: var(--spacing-2xl);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        text-align: center;
        max-width: 680px;
        width: 90%;
        margin: var(--spacing-lg);
      }

      .page-title {
        color: var(--text-primary);
        margin-bottom: var(--spacing-sm);
        font-size: var(--font-size-2xl);
        font-weight: 800;
      }

      .page-subtitle {
        color: var(--text-secondary);
        margin: 0 0 var(--spacing-xl);
        font-size: var(--font-size-base);
      }

      .button-group {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-sm);
        justify-content: center;
        margin: var(--spacing-lg) 0;
      }

      .nav-section {
        margin-top: var(--spacing-lg);
        display: flex;
        gap: var(--spacing-sm);
        justify-content: center;
        flex-wrap: wrap;
      }

      /* ë°˜ì‘í˜• */
      @media (max-width: 768px) {
        .main-container {
          padding: var(--spacing-lg);
          margin: var(--spacing-sm);
        }

        .button-group {
          flex-direction: column;
          align-items: center;
        }

        .nav-section {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="main-container fade-in-unified">
      {% block content %}
      <h1 class="page-title">{% block page_title %}ğŸ¥ ë³´í—˜ í”Œë«í¼{% endblock %}</h1>

      {% if page_subtitle %}
      <p class="page-subtitle">{% block page_subtitle %}{{ page_subtitle }}{% endblock %}</p>
      {% endif %} {% block main_content %}
      <!-- í˜ì´ì§€ë³„ ì£¼ìš” ë‚´ìš© -->
      {% endblock %} {% block navigation %}
      <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ë“¤ -->
      {% endblock %} {% endblock %}
    </div>

    <!-- í†µí•© JavaScript ìœ í‹¸ë¦¬í‹° -->
    <script src="{% static 'insurance_app/js/common-utils.js' %}"></script>

    <!-- í˜ì´ì§€ë³„ ì¶”ê°€ JavaScript -->
    {% block extra_js %}{% endblock %}

    <!-- ê³µí†µ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // ëª¨ë“  ì¹© ì»¨í…Œì´ë„ˆ ìë™ ì´ˆê¸°í™”
        document.querySelectorAll('.chips-container').forEach((container) => {
          ChipController.init(container, {
            multiple: container.dataset.multiple !== 'false',
          });
        });

        // í¼ ìœ íš¨ì„± ê²€ì‚¬ ìë™ ë°”ì¸ë”©
        document.querySelectorAll('form').forEach((form) => {
          form.addEventListener('submit', function (e) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach((field) => {
              if (!field.value.trim()) {
                FormUtils.validateField(field, { required: true });
                isValid = false;
              }
            });

            if (!isValid) {
              e.preventDefault();
              UIUtils.showToast('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
            }
          });
        });
      });
    </script>
  </body>
</html>
