# AI 보험 플랫폼 요구사항 문서

## 소개

이 문서는 AI 기술을 활용한 종합 보험 플랫폼의 요구사항을 정의합니다. 이 플랫폼은 복잡한 보험 상품을 일반 사용자가 쉽게 이해하고 선택할 수 있도록 돕는 것을 목표로 합니다.

## 요구사항

### 요구사항 1: 사용자 인증 및 프로필 관리

**사용자 스토리:** 사용자로서, 개인화된 보험 서비스를 받기 위해 계정을 생성하고 프로필을 관리하고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 회원가입을 요청할 때 THEN 시스템은 사용자명, 이메일, 비밀번호, 생년월일, 성별, 운전면허 보유 여부를 입력받아야 합니다
2. WHEN 사용자가 로그인을 시도할 때 THEN 시스템은 사용자명과 비밀번호로 인증을 수행해야 합니다
3. WHEN 인증된 사용자가 마이페이지에 접근할 때 THEN 시스템은 개인정보 수정 기능을 제공해야 합니다
4. WHEN 사용자가 개인정보를 수정할 때 THEN 시스템은 현재 비밀번호 확인 후 변경을 허용해야 합니다

### 요구사항 2: AI 기반 보험 추천 시스템

**사용자 스토리:** 사용자로서, 내 상황에 맞는 최적의 보험 상품을 AI의 도움으로 추천받고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 보험 추천을 요청할 때 THEN 시스템은 사용자 프로필(나이, 성별, 운전면허 보유 여부)을 기반으로 개인화된 추천을 제공해야 합니다
2. WHEN 사용자가 추가 정보(거주지역, 운전경력, 사고이력, 연간주행거리, 차량정보, 보장수준)를 입력할 때 THEN 시스템은 더 정확한 추천을 제공해야 합니다
3. WHEN 시스템이 보험료를 계산할 때 THEN 보험료, 보장 내용, 특약 조건을 종합적으로 분석하여 점수화해야 합니다
4. WHEN 추천 결과가 생성될 때 THEN 시스템은 추천 이력을 데이터베이스에 저장해야 합니다

### 요구사항 3: RAG 기반 보험 약관 검색 및 상담

**사용자 스토리:** 사용자로서, 복잡한 보험 약관에 대해 자연어로 질문하고 정확한 답변을 받고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 보험 관련 질문을 입력할 때 THEN 시스템은 Pinecone 벡터 데이터베이스에서 관련 약관을 검색해야 합니다
2. WHEN 검색 결과가 반환될 때 THEN 시스템은 중복 제거 및 유사도 기반 필터링을 수행해야 합니다
3. WHEN 질문이 약관 관련일 때 THEN 시스템은 RAG 방식으로 답변을 생성해야 합니다
4. WHEN 질문이 일반적인 내용일 때 THEN 시스템은 LLM을 통해 직접 답변을 생성해야 합니다
5. WHEN 답변이 생성될 때 THEN 시스템은 참조 문서와 페이지 정보를 함께 제공해야 합니다

### 요구사항 4: 보험 용어 사전

**사용자 스토리:** 사용자로서, 어려운 보험 용어를 쉽게 찾아보고 이해하고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 용어 사전에 접근할 때 THEN 시스템은 보험 관련 전문 용어 목록을 제공해야 합니다
2. WHEN 사용자가 용어를 검색할 때 THEN 시스템은 용어명, 정의, 동의어를 기반으로 검색 결과를 반환해야 합니다
3. WHEN 용어가 표시될 때 THEN 시스템은 카테고리별 분류(보장, 면책, 금액, 절차 등)를 제공해야 합니다
4. WHEN 용어 상세 정보가 표시될 때 THEN 시스템은 쉬운 설명과 상세 설명을 모두 제공해야 합니다
5. WHEN 용어에 관련 용어가 있을 때 THEN 시스템은 연관 용어 링크를 제공해야 합니다

### 요구사항 5: 교통사고 관리 시스템

**사용자 스토리:** 사용자로서, 교통사고 발생 시 디지털 협의서를 작성하고 관리하고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 사고 협의서를 작성할 때 THEN 시스템은 사고 일시, 장소, 당사자 정보, 차량 정보, 피해 상황을 입력받아야 합니다
2. WHEN 사용자가 차량 피해 부위를 표시할 때 THEN 시스템은 시각적 차량 다이어그램을 제공해야 합니다
3. WHEN 협의서가 완성될 때 THEN 시스템은 PDF 또는 이미지 형태로 다운로드 기능을 제공해야 합니다
4. WHEN 사용자가 개인정보 보호를 원할 때 THEN 시스템은 주민등록번호 마스킹 옵션을 제공해야 합니다
5. WHEN 사용자가 마이페이지에 접근할 때 THEN 시스템은 작성한 협의서 목록과 관리 기능을 제공해야 합니다
6. WHEN 사용자가 협의서를 수정할 때 THEN 시스템은 기존 데이터를 불러와 편집 가능한 형태로 제공해야 합니다
7. WHEN 사용자가 협의서를 삭제할 때 THEN 시스템은 본인 소유 문서만 삭제할 수 있도록 권한을 확인해야 합니다

### 요구사항 8: 시스템 리팩토링 및 코드 정리

**사용자 스토리:** 개발자로서, 유지보수가 용이하고 일관된 코드베이스를 구축하고 싶습니다.

#### 승인 기준

1. WHEN 폴더 구조를 정리할 때 THEN 시스템은 중복된 경로와 레거시 파일들을 제거해야 합니다
2. WHEN 모델을 정의할 때 THEN 시스템은 일관된 필드 정의와 검증 로직을 사용해야 합니다
3. WHEN 뷰 함수를 작성할 때 THEN 시스템은 중복 코드를 제거하고 표준화된 패턴을 따라야 합니다
4. WHEN 프론트엔드를 구성할 때 THEN 시스템은 통합된 디자인 시스템을 적용해야 합니다
5. WHEN JavaScript 모듈을 관리할 때 THEN 시스템은 중복 기능을 통합하고 모듈화해야 합니다

### 요구사항 6: 문서 처리 및 벡터 검색

**사용자 스토리:** 시스템 관리자로서, 보험사별 PDF 약관을 자동으로 처리하여 검색 가능한 형태로 저장하고 싶습니다.

#### 승인 기준

1. WHEN PDF 문서가 업로드될 때 THEN 시스템은 텍스트를 추출하고 청크 단위로 분할해야 합니다
2. WHEN 텍스트가 처리될 때 THEN 시스템은 임베딩 모델을 사용하여 벡터로 변환해야 합니다
3. WHEN 벡터가 생성될 때 THEN 시스템은 Pinecone 데이터베이스에 메타데이터와 함께 저장해야 합니다
4. WHEN 검색이 수행될 때 THEN 시스템은 의미 기반 유사도 검색을 통해 관련 문서를 찾아야 합니다
5. WHEN OCR이 필요할 때 THEN 시스템은 이미지에서 텍스트를 추출할 수 있어야 합니다

### 요구사항 7: 시스템 보안 및 성능

**사용자 스토리:** 사용자로서, 개인정보가 안전하게 보호되고 빠른 응답 속도를 경험하고 싶습니다.

#### 승인 기준

1. WHEN 민감한 정보가 처리될 때 THEN 시스템은 환경 변수를 통해 API 키와 설정을 관리해야 합니다
2. WHEN 사용자가 로그인할 때 THEN 시스템은 CSRF 보호를 활성화해야 합니다
3. WHEN 정적 파일이 요청될 때 THEN 시스템은 압축 및 캐싱을 통해 성능을 최적화해야 합니다
4. WHEN 데이터베이스 쿼리가 실행될 때 THEN 시스템은 적절한 인덱싱을 통해 성능을 보장해야 합니다
5. WHEN 벡터 검색 결과가 반환될 때 THEN 시스템은 결과를 캐싱하여 응답 속도를 향상시켜야 합니다
